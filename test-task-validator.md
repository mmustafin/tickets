# Тестовое задание для Full Stack Developer (PHP, Yii2, MySQL, Vue/React)

Перед вами - тестовое задание на роль Full Stack разработчика. Объём задания **намеренно** превышает разумное время: мы хотим оценить ваши навыки по декомпозиции объемных задач. 
Поэтому, вместо того чтобы реализовывать всё, предлагаем сосредоточиться на наиболее значимых аспектах проекта, на ваше усмотрение, чтобы уложиться в условные 4 часа.

Мы будем оценивать следующие навыки:

* умение решать задачу, имея неполные данные о ней, 
* умение декомпозировать задачу на части в условиях, когда задачу целиком за отведенное время реализовать невозможно,
* умение самостоятельно принимать решения,
* организацию кода,
* умение применять тесты,
* умение работать с интерфейсами



## Описание задачи

Вам нужно сделать валидатор билетов, работающий через браузер на мобильниках и десктопе.

Задача приложения - проверять билеты на входе в театральный зал. Его использование будет выглядеть так: 

* в театр приходят зрители с билетами, на которых есть QR-код, и показывают их контролеру на входе в зал. 
* Билетный контролер стоит у входа в зал с устройством (каким - см. ниже), сканирует им QR-коды на билетах, и говорит "проходите" (если билет действителен) или "с вашим билетом проблема, идите в кассу разбирайтесь" (если билет использован, недействителен или вообще не найден).
* Устройством может быть либо мобильный телефон с камерой, либо ноутбук с клавиатурой, либо специализированный валидатор (Android-телефон с аппаратным сканером). Аппаратный сканер эмулирует клавиатурный ввод: при сканировании QR-кода происходит ввод символов кода и по завершении - Enter.

Требования к функционалу:

* Приложение должно сканировать QR-код камерой устройства, при этом позволять вводить код с клавиатуры.
* Отсканированный/введенный код проверяется на бэкенде, после чего приложение показывает информацию о билете (сектор, ряд, место), и указывает, можно проходить по билету или нет.
* Повторный проход по одному и тому же билету должен быть запрещен.

Нужно сделать:

1. Бэкенд:
   1. Должен быть написан на Yii2, PHP 8.2/8.3 и данные хранить в базе MySQL
   2. Структура базы должна создаваться миграциями в Yii2.
   3. Данные из JSON нужно импортировать в БД средствами бэкенда (сделать консольную команду, импортирующую файл в БД)
   4. У бэкенда должно быть API для общения с фронтендом. Оно должно иметь какую-то аутентификацию (для упрощения, токен можно захардкодить)
   5. Работа бэкенда должна быть покрыта тестами, в том объеме, каком сочтете нужным
2. Фронтенд:
   1. Должен быть написан на Vue или React, 
   2. TypeScript - желательно, но не принципиально
   3. Для упрощения тестирования, считаем что размер телефона - условный iPhone 12 Pro (есть пресет в Chrome), а десктоп - это 1280х800 и выше, а браузер - из последних версий (Google Chrome или Safari).
   4. Предусмотрите ситуацию, что камеры нет (либо нет разрешения на её использование). В таком случае приложение должно работать в режиме ввода с клавиатуры.
   5. Уделите внимание удобству: поток людей большой, количество действий для сканирования следующего билета должно быть сведено к минимуму.
   6. Будет здорово, если вы покроете работу фронтенда какими-то тестами (в том числе e2e-тестами) с помощью любого инструментария.

Тестовый список билетов для импорта:
```json
[
  {"id": 1, "qrcode": "5001", "area":  "Партер", "row":  "1", "seat":  "54", "status":  "valid"},
  {"id": 2, "qrcode": "5002", "area":  "Партер", "row":  "2", "seat":  "1", "status":  "valid"},
  {"id": 3, "qrcode": "5003", "area":  "Партер", "row":  "45", "seat":  "231", "status":  "valid"},
  {"id": 4, "qrcode": "5004", "area":  "Балкон 3-й ярус", "row":  "", "seat":  "А", "status":  "valid"},
  {"id": 4, "qrcode": "5005", "area":  "Балкон 3-й ярус", "row":  "", "seat":  "Б", "status":  "used"},
  {"id": 5, "qrcode": "5006", "area":  "Партер", "row":  "1", "seat":  "54", "status":  "refunded"},
  {"id": 6, "qrcode": "5007", "area":  "Партер", "row":  "1", "seat":  "54", "status":  "cancelled"}
]
```

### Подсказки
* В качестве библиотеки для сканирования QR-кодов мы используем https://github.com/nimiq/qr-scanner - можете взять её, можете взять любую другую.
* В качестве темплейта для Yii2 рекомендуем взять https://github.com/yiisoft/yii2-app-advanced, это будет ближе к тому, что используем мы. Но опять же - не принципиально
* Использование Docker - хорошо, но совершенно не обязательно. Если вам с ним удобнее - хорошо, но не тратьте на него время без необходимости.
* Можно сделать Makefile для запуска приложения и тестов

### Дополнительные указания:

Как уже говорилось в начале, объём задания **намеренно** превышает разумное время. 

Поэтому, вместо того чтобы реализовывать всё, чтобы уложиться в условные 4 часа, предлагаем сосредоточиться на наиболее значимых аспектах проекта, на ваше усмотрение.

1. Минимальный набор функционала:
   * Основная цель задания — продемонстрировать ваш подход к проектированию и разработке, поэтому вам не обязательно реализовывать весь функционал целиком.
     * Выберите ключевые моменты, которые, по вашему мнению, лучше всего покажут ваши навыки. Это могут быть:
       * Логика проверки билета на бэкенде.
       * Реализация API для взаимодействия с фронтендом.
       * Валидация и обработка QR-кодов на фронтенде.
       * Обработка билетов и визуальное оповещение пользователя.
     * Необходимо кратко пояснить, почему вы выбрали именно эти части для реализации.
2. Декомпозиция:
   * Вторичная цель задания - продемонстрировать ваш подход к декомпозиции громоздких задач. 
     * Покажите, как бы вы разбили эту задачу на подзадачи, если бы конечная цель была довести её до релиза короткими итерациями (~4 часа на итерацию).
     * В какой последовательности следовало бы делать эти задачи? Что можно было бы делать параллельно, делегировав другому члену команды?
     * Сколько бы вы заложили времени на полную реализацию задачи?
3. Тестирование:
   * Вам не нужно полностью покрывать тестами всё приложение. Достаточно будет написать несколько примеров unit или e2e-тестов для наиболее важных частей, чтобы показать ваш подход к тестированию.
   * Будет здорово, если вы опишете, какие ешё вещи стоит покрыть тестами
4. Что обязательно:
   * Важным критерием остаётся качество кода: организацию кода, структуру и подход к решению задачи мы оценим так же, как и полную реализацию. 
   * Старайтесь уделять внимание читаемости, структуре и тестированию, даже если не реализуете все детали функционала.
   * Уделите внимание неймингу сущностей (переменных, полей в БД и т.д.)
5. Презентация решения:
   * В финальном отчёте опишите:
     * Какие части функционала вы реализовали.
     * Какие решения принимали в ходе разработки.
     * Что бы вы доработали или изменили, если бы было больше времени.

### Как оформить итоговый результат:
1. Результат должен быть либо архив (zip/tar.gz), либо ссылка на git-репозиторий.
2. В корне должен лежать README.md с неким финальным отчетом (описанием итога проделанной работы). Опишите в нем:
    1. какие части функционала вы реализовали,
    2. какие решения вы принимали в ходе разработки,
    3. что бы вы доработали или изменили, если бы было больше времени,
    4. структура проекта (где что лежит, куда смотреть),
    5. способ запуска и требования к окружению для этого (версии php/nodejs/mysql, команды для запуска и т.д.),
    6. способ запуска тестов
